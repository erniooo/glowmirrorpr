<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GlowMirror</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:wght@600;700&family=Sora:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              ink: "var(--gm-ink)",
              cream: "var(--gm-cream)",
              sand: "var(--gm-sand)",
              gold: "var(--gm-gold)",
              clay: "var(--gm-clay)",
            },
            fontFamily: {
              sans: ["Sora", "ui-sans-serif", "system-ui"],
              serif: ["Fraunces", "ui-serif", "Georgia"],
            },
            boxShadow: {
              glow: "0 18px 60px rgba(0,0,0,0.35)",
            },
          },
        },
      };
    </script>
    <link rel="stylesheet" href="./styles.css" />

    <!-- MediaPipe (Face Landmarks) -->
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3.1675466862/camera_utils.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.3.1675466124/drawing_utils.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@0.4.1633559619/face_mesh.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body class="bg-ink text-cream font-sans">
    <div class="app" id="app">
      <video class="camera" id="camera" autoplay playsinline muted></video>
      <canvas class="fx" id="fx"></canvas>

      <div class="ui">
        <main class="stage">
          <section class="screen" data-screen="welcome">
            <div
              class="max-w-2xl rounded-3xl border border-white/10 bg-white/90 p-10 text-ink shadow-glow backdrop-blur"
            >
              <div class="mb-6 flex items-center gap-3">
                <div
                  class="h-10 w-10 rounded-full bg-gradient-to-br from-[#f3dcc9] via-gold to-clay"
                ></div>
                <div>
                  <div class="text-lg font-semibold">GlowMirror</div>
                  <div class="text-xs uppercase tracking-[0.2em] text-ink/50">
                    Smart Skin Check
                  </div>
                </div>
              </div>
              <h1 class="font-serif text-4xl md:text-5xl">Dein Skin-Check in 20 Sekunden</h1>
              <p class="mt-4 text-ink/60">
                GlowMirror bietet ein m&ouml;gliches Kiosk-Erlebnis f&uuml;r einen schnellen
                Skin-Check. Es werden keine Bilder gespeichert. Keine medizinische Beratung.
              </p>
              <div class="mt-8 flex flex-wrap gap-3">
                <button
                  class="rounded-full bg-gradient-to-r from-gold to-clay px-6 py-3 text-sm font-semibold text-white"
                  id="btnStartCamera"
                  type="button"
                >
                  Hautanalyse starten
                </button>
                <button
                  class="rounded-full border border-ink/20 bg-white/70 px-6 py-3 text-sm font-semibold text-ink"
                  id="btnStartNoCamera"
                  type="button"
                >
                  Ohne Kamera starten
                </button>
              </div>
              <div class="mt-6 text-xs text-ink/50">
                Tipp: F&uuml;r den &ldquo;Wow&rdquo;-Effekt Kamera erlauben &ndash; dann wird ein
                Live-Face-Scan angezeigt.
              </div>
            </div>
          </section>

          <section class="screen is-hidden" data-screen="scanning">
            <div class="scan-overlay">
              <div class="scan-brand">
                <div class="scan-dot"></div>
                <div class="text-xs uppercase tracking-[0.28em] text-white/60">GlowMirror</div>
              </div>
              <div class="scan-status" id="scanStatus" aria-live="polite"></div>
              <div class="scan-hud">
                <div class="scan-title">Analyse l&auml;uft</div>
                <div class="scan-subtitle" id="scanHint">
                  Bitte schau in die Kamera und halte dein Gesicht im Sichtfeld.
                </div>
                <div class="scan-progress">
                  <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                  </div>
                  <div class="progress-meta">
                    <div id="progressLabel">0%</div>
                    <button class="link" id="btnCancel" type="button">Analyse abbrechen</button>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section class="screen is-hidden" data-screen="results">
            <div class="results-full">
              <header class="results-hero">
                <div class="results-kicker">Analyse abgeschlossen</div>
                <h2 class="results-title">Dein Ergebnis ist da</h2>
                <div class="results-subtitle" id="profileSubtitle"></div>

                <div class="results-summary">
                  <div class="score-ring" id="glowScoreRing" aria-label="Glow Score">
                    <div class="score-ring-inner">
                      <div class="score-ring-value" id="glowScoreValue">--</div>
                      <div class="score-ring-label">Glow&nbsp;Score</div>
                    </div>
                  </div>
                  <div class="results-tags" id="resultsTags"></div>
                </div>

                <div class="results-meta">
                  <div class="meta-item">
                    <span>Scan-ID</span>
                    <strong id="scanId">GM-2401</strong>
                  </div>
                  <div class="meta-item">
                    <span>Umgebung</span>
                    <strong>Neutral, Studio-Licht</strong>
                  </div>
                  <div class="meta-item">
                    <span>Profil</span>
                    <strong id="profileFocus">Balance + Schutz</strong>
                  </div>
                </div>

                <button
                  class="mt-3 w-fit rounded-full bg-gradient-to-r from-gold to-clay px-5 py-2 text-xs font-semibold text-white"
                  id="btnRescan"
                  type="button"
                >
                  Neu scannen
                </button>
              </header>

              <div class="results-content">
                <section class="results-section">
                  <div class="section-title">Deine Hautanalyse</div>
                  <div class="scores scores--grid" id="scores"></div>
                </section>

                <section class="results-section">
                  <div class="section-title">Was wir gefunden haben</div>
                  <ol class="analysis-steps" id="analysisSteps"></ol>
                </section>

                <section class="results-section">
                  <div class="section-title">Produktempfehlungen</div>
                  <div class="text-sm text-ink/60">
                    Ausgew&auml;hlt f&uuml;r dein Profil &ndash; basierend auf Hautzustand und
                    Routine-Zielen.
                  </div>
                  <div class="products" id="products"></div>
                  <div class="cta">
                    <div class="cta-copy">
                      Ergebnisse mitnehmen?
                      <div class="text-sm text-ink/60">
                        QR-Code sendet Routine &amp; Produkte aufs Handy.
                      </div>
                    </div>
                    <div class="qr" aria-label="QR Code"></div>
                  </div>
                </section>
              </div>
            </div>
          </section>

          <section class="screen is-hidden" data-screen="error">
            <div
              class="max-w-xl rounded-3xl border border-white/10 bg-white/90 p-10 text-ink shadow-glow backdrop-blur"
            >
              <h1 class="font-serif text-3xl">Kamera nicht verf&uuml;gbar</h1>
              <p class="mt-4 text-ink/60" id="errorMessage">
                Bitte erlaube den Zugriff auf die Kamera oder starte ohne Kamera.
              </p>
              <div class="mt-6 flex flex-wrap gap-3">
                <button
                  class="rounded-full bg-gradient-to-r from-gold to-clay px-6 py-3 text-sm font-semibold text-white"
                  id="btnRetryCamera"
                  type="button"
                >
                  Kamera erneut versuchen
                </button>
                <button
                  class="rounded-full border border-ink/20 bg-white/70 px-6 py-3 text-sm font-semibold text-ink"
                  id="btnFallbackNoCamera"
                  type="button"
                >
                  Ohne Kamera starten
                </button>
              </div>
            </div>
          </section>
        </main>

        <footer class="footer">
          <div class="footer-pill">
            Datenschutz: Live-Ansicht &middot; keine Speicherung &middot; kein Upload
          </div>
        </footer>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>
